---
layout: post
title: 'List Comprehensions. Генераторы списков'
category: python
tags: python
---

[Источник](https://stepik.org/lesson/59203/step/13?unit=36786)

List comprehension - это компактный способ обработки списков.

Основные преимущества List comprehension перед обычной конструкцией (цикл for+if+обработка):

- скорость (List comprehension быстрее, чем ```for```)
- краткость (в 1 строку можно записать довольно развесистую конструкцию, некоторые считают её лучше читаемой)

Примером List comprehension может служить конструкция вида:

```python
[n for n in range(1, 10000) if n % 2 == 0]
```

При этом условия может и не быть, например:

```python
[str(n) for n in range(10)]
```

Давайте рассмотрим простую задачу:

Получим новый список из исходного ```L = ["a", "", "b", "", "", "c"]```, которые не будет содержать пустых строк.

Уже имеющихся у нас знаний достаточно для разработки следующего алгоритма:

1. создадим пустой список (туда мы будем добавлять непустые элементы исходного)
2. Запустим цикл for для прохода по всем элементам исходного списка
3. Проверим, что текущий элемент не пустая строка (воспользуемся приведением типов для строк в логических выражениях)
4. При выполнении условия, добавим элемент в новый список

Получится такой код:

```python
L = ["a", "", "b", "", "", "c"]
M = []
for element in L: 
    if element:
        M.append(element)
M

# ['a', 'b', 'c']

```

List Comprehension для этой задачи:

```python
[element for element in L if element]

# ['a', 'b', 'c']
```

**Многомерные List comprehension**

Возможны итерации по нескольким переменных, например:

```python
[(x, y) for x in range(3) for y in range(3)]

# [(0, 0), (0, 1), (0, 2), (1, 0), (1, 1), (1, 2), (2, 0), (2, 1), (2, 2)]
```

**Многоуровневые List comprehension**

Возможны вложенные друг в друга итерации.

**Аналоги  List comprehension для других типов**

Аналогичные конструкции бывают для словарей, множеств и (в общем виде) генераторов.

```python
{x for x in range(10)}
# {0, 1, 2, 3, 4, 5, 6, 7, 8, 9}

{x:x**2 for x in range(10)}
# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
```